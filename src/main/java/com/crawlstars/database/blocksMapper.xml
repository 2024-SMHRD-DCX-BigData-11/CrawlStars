<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crawlstars.database.blocksMapper">
	<insert id="userBlock" parameterType="String">
		INSERT into block_users VALUES(block_users_SEQ.NEXTVAL, #{sp_id}, #{block_sp_id}, sysdate)
	</insert>
	
	<select id="getBlockusers" parameterType="String" resultType="com.crawlstars.model.blocks">
		SELECT block_sp_id FROM block_users WHERE sp_id=#{myuser}
	</select>
	
	<select id="getNickByBlockuserId" parameterType="String" resultType="java.lang.String">
   		SELECT u.nick AS blockuser_nick FROM block_users b JOIN users u ON b.block_sp_id = u.sp_id WHERE b.sp_id = #{myuser} 
	</select>
	
	<select id="blockCheck" parameterType="com.crawlstars.model.blocks" resultType="Integer">
		select count(*) from block_users where sp_id=#{sp_id} and block_sp_id=#{block_sp_id}
	</select>
	
	<delete id="blockCancel" parameterType="String">
		delete from block_users where sp_id=#{sp_id} and block_sp_id=#{block_sp_id}
	</delete>
</mapper>